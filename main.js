!function(){"use strict";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button_type_submit",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_active"},e={url:"https://around-api.en.tripleten-services.com/v1",token:"9711a792-8332-4754-8b11-0fe0d4037fb9"};class s{constructor(t,e,s,o,n){let{name:i,link:r,_id:a,isLiked:l}=t;this._name=i,this._link=r,this._cardId=a,this._cardSelector=e,this._handleImageClick=s,this._handleApiCallback=o,this._handleDeleteButton=n,this._liked=l}_handleLikeButton=t=>{t.target.classList.contains("card__button-like_state_active")?this._callbackOptions={action:"DELETE",endpoint:`cards/${this._cardId}/likes`}:this._callbackOptions={action:"PUT",endpoint:`cards/${this._cardId}/likes`},this._handleApiCallback(this._callbackOptions).then((()=>t.target.classList.toggle("card__button-like_state_active"))).catch((t=>console.error(t)))};_handleDeletion=()=>{this._handleDeleteButton({action:"DELETE",endpoint:`cards/${this._cardId}`}).then((t=>{t&&this._cardElement.remove()})).catch((t=>console.error(t)))};_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__button-delete").addEventListener("click",this._handleDeletion),this._image.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_showImage(){this._image.classList.add("card__image_state_loaded")}generateCard(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__name").textContent=this._name,this._likeButton=this._cardElement.querySelector(".card__button-like"),this._image=this._cardElement.querySelector(".card__image"),this._image.onload=()=>this._showImage(),this._image.onerror=()=>this._showImage(),this._image.src=this._link,this._image.alt=this._name,this._liked&&this._likeButton.classList.add("card__button-like_state_active"),this._setEventListeners(),this._cardElement}}class o{constructor(t,e){let{items:s,renderer:o}=t;this._items=s,this._renderer=o,this._container=document.querySelector(e)}addItem(t){this._container.prepend(t)}renderItems(){this._items.forEach((t=>this._renderer(t)))}setItems(t){this._items=t}}class n{constructor(t,e){this._settings=e,this._form=t}_showError(t){const e=this._form.querySelector(`.${t.id}-error`);e.classList.add(this._settings.errorClass),t.classList.add(this._settings.inputErrorClass),e.textContent=t.validationMessage}_hideError(t){const e=this._form.querySelector(`.${t.id}-error`);e.classList.remove(this._settings.errorClass),t.classList.remove(this._settings.inputErrorClass),e.textContent=""}_disableButton(){this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputsList.some((t=>!t.validity.valid))}_toggleButton(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_checkInputValidity(t){this._toggleButton();const e=t.target;e.validity.valid?this._hideError(e):this._showError(e)}_setInputsListener(){this._inputsList.forEach((t=>{t.addEventListener("input",(t=>this._checkInputValidity(t)))})),this._form.addEventListener("reset",(()=>{this._inputsList.forEach((t=>this._hideError(t))),this._disableButton()}))}resetValidation(){this._toggleButton(),this._inputsList.forEach((t=>this._hideError(t)))}enableValidation(){this._inputsList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._form.querySelector(this._settings.submitButtonSelector),this._setInputsListener()}}class i{constructor(t){this._modal=document.querySelector(t)}open(){this._modal.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modal.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"==t.key&&this.close()};_handleMouseClose=t=>{(t.target.classList.contains("modal__button_type_close")||t.target==this._modal)&&this.close()};setEventListeners(){this._modal.addEventListener("mousedown",this._handleMouseClose)}}class r extends i{constructor(t){let{selector:e,callback:s}=t;super(e),this._submitHandler=s,this._form=this._modal.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input"),this._submitButton=this._form.querySelector(".modal__button_type_submit")}_getInputValues(){return this._formValues={},this._inputList.forEach((t=>this._formValues[t.name]=t.value)),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault();const e=this._submitButton.textContent;this._submitButton.textContent="Saving...",this._submitHandler(this._getInputValues()).then((()=>{super.close(),this._form.reset()})).catch((t=>console.error(t))).finally((()=>this._submitButton.textContent=e))}))}setInputsValues(t){this._inputList.forEach((e=>e.value=t[e.name]))}getForm(){return this._form}}class a extends i{constructor(t){super(t),this._image=this._modal.querySelector(".modal__image"),this._imageName=this._modal.querySelector(".modal__image-name")}open(t){let{name:e,link:s}=t;super.open(),this._image.src=s,this._image.alt=e,this._imageName.textContent=e}}class l extends i{constructor(t){super(t),this._confirmButton=document.getElementById("button-confirm")}open(){return super.open(),new Promise((t=>{this._isConfirmed=!1,this._resolve=t,this._buttonText=this._confirmButton.textContent,this._handleConfirm=()=>{this._isConfirmed=!0,this._confirmButton.textContent="Saving...",this._resolve(!0)},this._confirmButton.addEventListener("click",this._handleConfirm,{once:!0})}))}close(){this._isConfirmed||(this._resolve(!1),this._resolve=null),this._confirmButton.textContent!==this._buttonText&&(this._confirmButton.textContent=this._buttonText),super.close()}}class c{constructor(t){let{nameSelector:e,aboutSelector:s,photoSelector:o}=t;this._name=document.querySelector(e),this._about=document.querySelector(s),this._avatarPhoto=document.querySelector(o)}_showImage(){this._avatarPhoto.classList.add("profile__photo_state_loaded")}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(t){let{name:e,about:s,avatar:o}=t;this._name.textContent=e,this._about.textContent=s,o&&(this._avatarPhoto.onload=()=>this._showImage(),this._avatarPhoto.onerror=()=>this._showImage(),this._avatarPhoto.src=o)}}class d{constructor(t){let{url:e,token:s}=t;this._apiurl=e,this._options={headers:{authorization:s,"Content-Type":"application/json"}}}_genericFetch(t){let{method:e="GET",endpoint:s,body:o}=t;const n={...this._options,method:e};return o&&(n.body=JSON.stringify(o)),fetch(`${this._apiurl}/${s}`,n).then((t=>t.ok?t.json():Promise.reject(`Error: ${t.status}`)))}getUser(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"users/me";return this._genericFetch({endpoint:t})}getCard(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cards";return this._genericFetch({endpoint:t})}editUser(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"users/me";return this._genericFetch({method:"PATCH",endpoint:e,body:t})}editCard(t,e){return this._genericFetch({method:t,endpoint:e})}addCard(t){return this._genericFetch({method:"POST",endpoint:"cards",body:t})}}(()=>{let{editPopupSelector:i,addPopupSelector:_,confirmPopupSelector:h,nameSelector:u,aboutSelector:m,popupImageContainer:p,cardsContainer:g,buttonEditSelector:b,buttonAddSelector:v,photoSelector:f,editAvatarPopupSelector:E,profileAvatarSelector:S}={editPopupSelector:"#modal-edit",addPopupSelector:"#modal-add",confirmPopupSelector:"#modal-confirm",nameSelector:".profile__name",aboutSelector:".profile__description",popupImageContainer:"#modal-image-container",cardsContainer:".elements__list",buttonEditSelector:".profile__button_type_edit",buttonAddSelector:".profile__button_type_add",photoSelector:".profile__photo",editAvatarPopupSelector:"#modal-edit-avatar",profileAvatarSelector:".profile__avatar"};const C={},L=new a(p);L.setEventListeners();const k=new d(e),y=new c({nameSelector:u,aboutSelector:m,photoSelector:f}),I=t=>{L.open(t)},B=t=>{let{action:e,endpoint:s}=t;return k.editCard(e,s)},q=new l(h);q.setEventListeners();const w=t=>{let{action:e,endpoint:s}=t;return q.open().then((t=>!!t&&k.editCard(e,s).then((()=>(q.close(),!0)))))},x=t=>new s(t,"#card",I,B,w).generateCard(),P=new o({items:[],renderer:t=>{P.addItem(x(t))}},g),V=new r({selector:i,callback:t=>{const e={name:t["edit-name"],about:t["edit-job"]};return k.editUser(e).then((t=>y.setUserInfo(t)))}});V.setEventListeners();const F=new r({selector:_,callback:t=>{const e={name:t["add-name"],link:t["add-link"]};return k.addCard(e).then((t=>P.addItem(x(t))))}});F.setEventListeners();const A=new r({selector:E,callback:t=>k.editUser({avatar:t["edit-avatar"]},"users/me/avatar").then((t=>y.setUserInfo(t)))});A.setEventListeners(),k.getUser().then((t=>{y.setUserInfo(t)})).catch((t=>console.error(t))),k.getCard().then((t=>{P.setItems(t.reverse()),P.renderItems()})).catch((t=>{console.error(t)})),(t=>{const e=[];e.push(V.getForm()),e.push(F.getForm()),e.push(A.getForm()),e.forEach((e=>{C[e.name]=new n(e,t),C[e.name].enableValidation()}))})(t),document.querySelector(S).addEventListener("mousedown",(()=>{A.open(),C[A.getForm().name].resetValidation()})),document.querySelector(b).addEventListener("click",(()=>{V.open(),(()=>{const{name:t,about:e}=y.getUserInfo();V.setInputsValues({"edit-name":t,"edit-job":e})})(),C[V.getForm().name].resetValidation()})),document.querySelector(v).addEventListener("click",(()=>{F.open(),C[F.getForm().name].resetValidation()}))})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBSSxNQUFFbUksR0FBVXdDLEVBQVN6QyxjQUNqQ2tELEVBQVV2RSxnQkFBZ0IsQ0FBRSxZQUFhN0csRUFBTSxXQUFZbUksR0FBUSxFQTJCbkUwRCxHQUNBckIsRUFBZVksRUFBVXJFLFVBQVUvRyxNQUFNbUYsaUJBQWlCLElBSTVEOUMsU0FBU04sY0FBY3NJLEdBQW1CckksaUJBQWlCLFNBQVMsS0FDbEV1SixFQUFTN0YsT0FDVDhFLEVBQWVlLEVBQVN4RSxVQUFVL0csTUFBTW1GLGlCQUFpQixHQUU1RCxFQW5MRCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaW5pdGlhbERhdGEgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGVGb3JtQ29uZmlnT2JqZWN0ID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbl90eXBlX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGVkaXRQb3B1cFNlbGVjdG9yOiBcIiNtb2RhbC1lZGl0XCIsXHJcbiAgYWRkUG9wdXBTZWxlY3RvcjogXCIjbW9kYWwtYWRkXCIsXHJcbiAgY29uZmlybVBvcHVwU2VsZWN0b3I6IFwiI21vZGFsLWNvbmZpcm1cIixcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBhYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHBvcHVwSW1hZ2VDb250YWluZXI6IFwiI21vZGFsLWltYWdlLWNvbnRhaW5lclwiLFxyXG4gIGNhcmRzQ29udGFpbmVyOiBcIi5lbGVtZW50c19fbGlzdFwiLFxyXG4gIGJ1dHRvbkVkaXRTZWxlY3RvcjogXCIucHJvZmlsZV9fYnV0dG9uX3R5cGVfZWRpdFwiLFxyXG4gIGJ1dHRvbkFkZFNlbGVjdG9yOiBcIi5wcm9maWxlX19idXR0b25fdHlwZV9hZGRcIixcclxuICBwaG90b1NlbGVjdG9yOiBcIi5wcm9maWxlX19waG90b1wiLFxyXG4gIGVkaXRBdmF0YXJQb3B1cFNlbGVjdG9yOiBcIiNtb2RhbC1lZGl0LWF2YXRhclwiLFxyXG4gIHByb2ZpbGVBdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbn07XHJcblxyXG5jb25zdCBBUElkYXRhID0ge1xyXG4gIHVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIHRva2VuOiBcIjk3MTFhNzkyLTgzMzItNDc1NC04YjExLTBmZTBkNDAzN2ZiOVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHsgaW5pdGlhbERhdGEsIHZhbGlkYXRlRm9ybUNvbmZpZ09iamVjdCwgc2VsZWN0b3JzLCBBUElkYXRhIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVBcGlDYWxsYmFjayxcclxuICAgIGhhbmRsZURlbGV0ZUJ1dHRvblxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRJZCA9IF9pZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQXBpQ2FsbGJhY2sgPSBoYW5kbGVBcGlDYWxsYmFjaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbiA9IGhhbmRsZURlbGV0ZUJ1dHRvbjtcclxuICAgIHRoaXMuX2xpa2VkID0gaXNMaWtlZDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2J1dHRvbi1saWtlX3N0YXRlX2FjdGl2ZVwiKSkge1xyXG4gICAgICB0aGlzLl9jYWxsYmFja09wdGlvbnMgPSB7XHJcbiAgICAgICAgYWN0aW9uOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGVuZHBvaW50OiBgY2FyZHMvJHt0aGlzLl9jYXJkSWR9L2xpa2VzYCxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrT3B0aW9ucyA9IHtcclxuICAgICAgICBhY3Rpb246IFwiUFVUXCIsXHJcbiAgICAgICAgZW5kcG9pbnQ6IGBjYXJkcy8ke3RoaXMuX2NhcmRJZH0vbGlrZXNgLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGFuZGxlQXBpQ2FsbGJhY2sodGhpcy5fY2FsbGJhY2tPcHRpb25zKVxyXG4gICAgICAudGhlbigoKSA9PlxyXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uLWxpa2Vfc3RhdGVfYWN0aXZlXCIpXHJcbiAgICAgIClcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbih7XHJcbiAgICAgIGFjdGlvbjogXCJERUxFVEVcIixcclxuICAgICAgZW5kcG9pbnQ6IGBjYXJkcy8ke3RoaXMuX2NhcmRJZH1gLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGlmIChyZXN1bHQpIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsZXRlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRpb24pO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0ltYWdlKCkge1xyXG4gICAgdGhpcy5faW1hZ2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2ltYWdlX3N0YXRlX2xvYWRlZFwiKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlLm9ubG9hZCA9ICgpID0+IHRoaXMuX3Nob3dJbWFnZSgpO1xyXG4gICAgdGhpcy5faW1hZ2Uub25lcnJvciA9ICgpID0+IHRoaXMuX3Nob3dJbWFnZSgpO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICBpZiAodGhpcy5fbGlrZWQpXHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX3N0YXRlX2FjdGl2ZVwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihmb3JtLCBzZXR0aW5ncykge1xuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XG4gIH1cblxuICBfc2hvd0Vycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzTGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oKSB7XG4gICAgdGhpcy5faGFzSW52YWxpZElucHV0KCkgPyB0aGlzLl9kaXNhYmxlQnV0dG9uKCkgOiB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoZXZlbnQpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b24oKTtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xuICAgIGVsc2UgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgfVxuXG4gIF9zZXRJbnB1dHNMaXN0ZW5lcigpIHtcbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2ZW50KSA9PlxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZXZlbnQpXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gdGhpcy5faGlkZUVycm9yKGlucHV0KSk7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRzTGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gdGhpcy5faGlkZUVycm9yKGlucHV0KSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0c0xpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fc2V0SW5wdXRzTGlzdGVuZXIoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHRoaXMuX21vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09IFwiRXNjYXBlXCIpIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBfaGFuZGxlTW91c2VDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fYnV0dG9uX3R5cGVfY2xvc2VcIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldCA9PSB0aGlzLl9tb2RhbFxuICAgIClcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlQ2xvc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBzZWxlY3RvciwgY2FsbGJhY2sgfSkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25fdHlwZV9zdWJtaXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcclxuICAgICAgKGl0ZW0pID0+ICh0aGlzLl9mb3JtVmFsdWVzW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCBidXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoZXJyb3IpKVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0KSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldElucHV0c1ZhbHVlcyhpbnB1dERhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiAoaXRlbS52YWx1ZSA9IGlucHV0RGF0YVtpdGVtLm5hbWVdKSk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm07XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWFnZU5hbWUgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1uYW1lXCIpO1xuICB9XG5cbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maW1yYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbi1jb25maXJtXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgdGhpcy5faXNDb25maXJtZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgIHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzQ29uZmlybWVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgICAgICB0aGlzLl9yZXNvbHZlKHRydWUpO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLl9jb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDb25maXJtLCB7XHJcbiAgICAgICAgb25jZTogdHJ1ZSxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pc0NvbmZpcm1lZCkge1xyXG4gICAgICB0aGlzLl9yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgdGhpcy5fcmVzb2x2ZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fY29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCAhPT0gdGhpcy5fYnV0dG9uVGV4dClcclxuICAgICAgdGhpcy5fY29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2J1dHRvblRleHQ7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIHBob3RvU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhclBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaG90b1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW1hZ2UoKSB7XHJcbiAgICB0aGlzLl9hdmF0YXJQaG90by5jbGFzc0xpc3QuYWRkKFwicHJvZmlsZV9fcGhvdG9fc3RhdGVfbG9hZGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LCBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICBpZiAoYXZhdGFyKSB7XHJcbiAgICAgIHRoaXMuX2F2YXRhclBob3RvLm9ubG9hZCA9ICgpID0+IHRoaXMuX3Nob3dJbWFnZSgpO1xyXG4gICAgICB0aGlzLl9hdmF0YXJQaG90by5vbmVycm9yID0gKCkgPT4gdGhpcy5fc2hvd0ltYWdlKCk7XHJcbiAgICAgIHRoaXMuX2F2YXRhclBob3RvLnNyYyA9IGF2YXRhcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVybCwgdG9rZW4gfSkge1xyXG4gICAgdGhpcy5fYXBpdXJsID0gdXJsO1xyXG4gICAgdGhpcy5fb3B0aW9ucyA9IHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9nZW5lcmljRmV0Y2goeyBtZXRob2QgPSBcIkdFVFwiLCBlbmRwb2ludCwgYm9keSB9KSB7XHJcbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7IC4uLnRoaXMuX29wdGlvbnMsIG1ldGhvZCB9O1xyXG4gICAgaWYgKGJvZHkpIGZldGNoT3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYXBpdXJsfS8ke2VuZHBvaW50fWAsIGZldGNoT3B0aW9ucykudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIGlmIChyZXN1bHQub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXIoZW5kcG9pbnQgPSBcInVzZXJzL21lXCIpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZW5lcmljRmV0Y2goeyBlbmRwb2ludCB9KTtcclxuICB9XHJcblxyXG4gIGdldENhcmQoZW5kcG9pbnQgPSBcImNhcmRzXCIpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZW5lcmljRmV0Y2goeyBlbmRwb2ludCB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKGJvZHksIGVuZHBvaW50ID0gXCJ1c2Vycy9tZVwiKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2VuZXJpY0ZldGNoKHsgbWV0aG9kOiBcIlBBVENIXCIsIGVuZHBvaW50LCBib2R5IH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdENhcmQobWV0aG9kLCBlbmRwb2ludCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dlbmVyaWNGZXRjaCh7IG1ldGhvZCwgZW5kcG9pbnQgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGJvZHkpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZW5lcmljRmV0Y2goeyBtZXRob2Q6IFwiUE9TVFwiLCBlbmRwb2ludDogXCJjYXJkc1wiLCBib2R5IH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIHZhbGlkYXRlRm9ybUNvbmZpZ09iamVjdCxcclxuICBzZWxlY3RvcnMsXHJcbiAgQVBJZGF0YSxcclxuICBpbml0aWFsRGF0YSxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmltcmF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcclxuXHJcbigoe1xyXG4gIGVkaXRQb3B1cFNlbGVjdG9yLFxyXG4gIGFkZFBvcHVwU2VsZWN0b3IsXHJcbiAgY29uZmlybVBvcHVwU2VsZWN0b3IsXHJcbiAgbmFtZVNlbGVjdG9yLFxyXG4gIGFib3V0U2VsZWN0b3IsXHJcbiAgcG9wdXBJbWFnZUNvbnRhaW5lcixcclxuICBjYXJkc0NvbnRhaW5lcixcclxuICBidXR0b25FZGl0U2VsZWN0b3IsXHJcbiAgYnV0dG9uQWRkU2VsZWN0b3IsXHJcbiAgcGhvdG9TZWxlY3RvcixcclxuICBlZGl0QXZhdGFyUG9wdXBTZWxlY3RvcixcclxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3IsXHJcbn0pID0+IHtcclxuICBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuICBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2VDb250YWluZXIpO1xyXG4gIGltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY29uc3QgdHJpcGxldGVuQXBpID0gbmV3IEFwaShBUElkYXRhKTtcclxuXHJcbiAgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIHBob3RvU2VsZWN0b3IgfSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAoY2FyZERhdGEpID0+IHtcclxuICAgIGltYWdlUG9wdXAub3BlbihjYXJkRGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQXBpQ2FsbGJhY2sgPSAoeyBhY3Rpb24sIGVuZHBvaW50IH0pID0+IHtcclxuICAgIHJldHVybiB0cmlwbGV0ZW5BcGkuZWRpdENhcmQoYWN0aW9uLCBlbmRwb2ludCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpbXJhdGlvbihjb25maXJtUG9wdXBTZWxlY3Rvcik7XHJcbiAgcG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNhcmREZWxldGUgPSAoeyBhY3Rpb24sIGVuZHBvaW50IH0pID0+IHtcclxuICAgIHJldHVybiBwb3B1cENvbmZpcm0ub3BlbigpLnRoZW4oKGNvbmZpcm0pID0+IHtcclxuICAgICAgaWYgKCFjb25maXJtKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cmlwbGV0ZW5BcGkuZWRpdENhcmQoYWN0aW9uLCBlbmRwb2ludCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICBjYXJkRGF0YSxcclxuICAgICAgXCIjY2FyZFwiLFxyXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgICBoYW5kbGVBcGlDYWxsYmFjayxcclxuICAgICAgaGFuZGxlQ2FyZERlbGV0ZVxyXG4gICAgKTtcclxuICAgIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjYXJkc0NvbnRhaW5lclxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGluaXRpYWxpemUgPSAoKSA9PiB7XHJcbiAgICB0cmlwbGV0ZW5BcGlcclxuICAgICAgLmdldFVzZXIoKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG5cclxuICAgIHRyaXBsZXRlbkFwaVxyXG4gICAgICAuZ2V0Q2FyZCgpXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBjYXJkTGlzdC5zZXRJdGVtcyhyZXN1bHQucmV2ZXJzZSgpKTtcclxuICAgICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vZm9yIGFkZGluZyBidWxrIG9mIGluaXRpYWwgY2FyZHMgb24gbG9hZGluZyBwYWdlXHJcbiAgLy9yYXcgY29kZSBmb3IgZnV0dXJlIGZlYXR1cmVcclxuICAvLyBjb25zdCBhZGRDYXJkc0J1bGsgPSAoY2FyZHNEYXRhKSA9PiB7XHJcbiAgLy8gICBjYXJkc0RhdGEuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gIC8vICAgICB0cmlwbGV0ZW5BcGlcclxuICAvLyAgICAgICAuYWRkQ2FyZChjYXJkKVxyXG4gIC8vICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gY2FyZExpc3QuYWRkSXRlbShyZXNwb25zZSkpXHJcbiAgLy8gICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gIC8vICAgfSk7XHJcbiAgLy8gfTtcclxuXHJcbiAgLy8gYWRkQ2FyZHNCdWxrKGluaXRpYWxEYXRhKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUG9wdXBFZGl0ID0gKGlucHV0cykgPT4ge1xyXG4gICAgY29uc3QgaW5wdXREYXRhID0ge1xyXG4gICAgICBuYW1lOiBpbnB1dHNbXCJlZGl0LW5hbWVcIl0sXHJcbiAgICAgIGFib3V0OiBpbnB1dHNbXCJlZGl0LWpvYlwiXSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdHJpcGxldGVuQXBpXHJcbiAgICAgIC5lZGl0VXNlcihpbnB1dERhdGEpXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gdXNlckluZm8uc2V0VXNlckluZm8ocmVzcG9uc2UpKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVQb3B1cEFkZCA9IChpbnB1dHMpID0+IHtcclxuICAgIGNvbnN0IGlucHV0RGF0YSA9IHtcclxuICAgICAgbmFtZTogaW5wdXRzW1wiYWRkLW5hbWVcIl0sXHJcbiAgICAgIGxpbms6IGlucHV0c1tcImFkZC1saW5rXCJdLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0cmlwbGV0ZW5BcGlcclxuICAgICAgLmFkZENhcmQoaW5wdXREYXRhKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzdWx0KSkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVBvcHVwRWRpdEF2YXRhciA9IChpbnB1dHMpID0+IHtcclxuICAgIHJldHVybiB0cmlwbGV0ZW5BcGlcclxuICAgICAgLmVkaXRVc2VyKHsgYXZhdGFyOiBpbnB1dHNbXCJlZGl0LWF2YXRhclwiXSB9LCBcInVzZXJzL21lL2F2YXRhclwiKVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3BvbnNlKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgc2VsZWN0b3I6IGVkaXRQb3B1cFNlbGVjdG9yLFxyXG4gICAgY2FsbGJhY2s6IGhhbmRsZVBvcHVwRWRpdCxcclxuICB9KTtcclxuICBwb3B1cEVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBzZWxlY3RvcjogYWRkUG9wdXBTZWxlY3RvcixcclxuICAgIGNhbGxiYWNrOiBoYW5kbGVQb3B1cEFkZCxcclxuICB9KTtcclxuICBwb3B1cEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBzZWxlY3RvcjogZWRpdEF2YXRhclBvcHVwU2VsZWN0b3IsXHJcbiAgICBjYWxsYmFjazogaGFuZGxlUG9wdXBFZGl0QXZhdGFyLFxyXG4gIH0pO1xyXG4gIHBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25zdCByZWZyZXNoRWRpdElucHV0cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICBwb3B1cEVkaXQuc2V0SW5wdXRzVmFsdWVzKHsgXCJlZGl0LW5hbWVcIjogbmFtZSwgXCJlZGl0LWpvYlwiOiBhYm91dCB9KTtcclxuICB9O1xyXG5cclxuICBpbml0aWFsaXplKCk7XHJcblxyXG4gICgoY29uZmlnKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0ZWRGb3JtcyA9IFtdO1xyXG4gICAgdmFsaWRhdGVkRm9ybXMucHVzaChwb3B1cEVkaXQuZ2V0Rm9ybSgpKTtcclxuICAgIHZhbGlkYXRlZEZvcm1zLnB1c2gocG9wdXBBZGQuZ2V0Rm9ybSgpKTtcclxuICAgIHZhbGlkYXRlZEZvcm1zLnB1c2gocG9wdXBFZGl0QXZhdGFyLmdldEZvcm0oKSk7XHJcbiAgICB2YWxpZGF0ZWRGb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm0ubmFtZV0gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtLCBjb25maWcpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtLm5hbWVdLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgIH0pO1xyXG4gIH0pKHZhbGlkYXRlRm9ybUNvbmZpZ09iamVjdCk7XHJcblxyXG4gIC8vZWRpdEF2YXRhclxyXG4gIGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyU2VsZWN0b3IpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoKSA9PiB7XHJcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzW3BvcHVwRWRpdEF2YXRhci5nZXRGb3JtKCkubmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgLy9lZGl0QnV0dG9uXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25FZGl0U2VsZWN0b3IpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwb3B1cEVkaXQub3BlbigpO1xyXG4gICAgcmVmcmVzaEVkaXRJbnB1dHMoKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW3BvcHVwRWRpdC5nZXRGb3JtKCkubmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vYWRkQnV0dG9uXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25BZGRTZWxlY3RvcikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHBvcHVwQWRkLm9wZW4oKTtcclxuICAgIGZvcm1WYWxpZGF0b3JzW3BvcHVwQWRkLmdldEZvcm0oKS5uYW1lXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufSkoc2VsZWN0b3JzKTtcclxuIl0sIm5hbWVzIjpbInZhbGlkYXRlRm9ybUNvbmZpZ09iamVjdCIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQVBJZGF0YSIsInVybCIsInRva2VuIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVBcGlDYWxsYmFjayIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVBcGlDYWxsYmFjayIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfbGlrZWQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsImV2ZW50IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJfY2FsbGJhY2tPcHRpb25zIiwiYWN0aW9uIiwiZW5kcG9pbnQiLCJ0aGVuIiwidG9nZ2xlIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJfaGFuZGxlRGVsZXRpb24iLCJyZXN1bHQiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9pbWFnZSIsIl9zaG93SW1hZ2UiLCJhZGQiLCJnZW5lcmF0ZUNhcmQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsIl9saWtlQnV0dG9uIiwib25sb2FkIiwib25lcnJvciIsInNyYyIsImFsdCIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsInNldEl0ZW1zIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJzZXR0aW5ncyIsIl9zZXR0aW5ncyIsIl9mb3JtIiwiX3Nob3dFcnJvciIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlRXJyb3IiLCJfZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0c0xpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b24iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldElucHV0c0xpc3RlbmVyIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQb3B1cCIsIl9tb2RhbCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJfaGFuZGxlTW91c2VDbG9zZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrIiwic3VwZXIiLCJfc3VibWl0SGFuZGxlciIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJidXR0b25UZXh0IiwicmVzZXQiLCJmaW5hbGx5Iiwic2V0SW5wdXRzVmFsdWVzIiwiaW5wdXREYXRhIiwiZ2V0Rm9ybSIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlTmFtZSIsIlBvcHVwV2l0aENvbmZpbXJhdGlvbiIsIl9jb25maXJtQnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl9pc0NvbmZpcm1lZCIsIl9yZXNvbHZlIiwiX2J1dHRvblRleHQiLCJfaGFuZGxlQ29uZmlybSIsIm9uY2UiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJwaG90b1NlbGVjdG9yIiwiX2Fib3V0IiwiX2F2YXRhclBob3RvIiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJhdmF0YXIiLCJBcGkiLCJfYXBpdXJsIiwiX29wdGlvbnMiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9nZW5lcmljRmV0Y2giLCJtZXRob2QiLCJib2R5IiwiZmV0Y2hPcHRpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlciIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldENhcmQiLCJlZGl0VXNlciIsImVkaXRDYXJkIiwiYWRkQ2FyZCIsImVkaXRQb3B1cFNlbGVjdG9yIiwiYWRkUG9wdXBTZWxlY3RvciIsImNvbmZpcm1Qb3B1cFNlbGVjdG9yIiwicG9wdXBJbWFnZUNvbnRhaW5lciIsImNhcmRzQ29udGFpbmVyIiwiYnV0dG9uRWRpdFNlbGVjdG9yIiwiYnV0dG9uQWRkU2VsZWN0b3IiLCJlZGl0QXZhdGFyUG9wdXBTZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsImZvcm1WYWxpZGF0b3JzIiwiaW1hZ2VQb3B1cCIsInRyaXBsZXRlbkFwaSIsInVzZXJJbmZvIiwiY2FyZERhdGEiLCJwb3B1cENvbmZpcm0iLCJoYW5kbGVDYXJkRGVsZXRlIiwiX3JlZjMiLCJjb25maXJtIiwiY3JlYXRlQ2FyZCIsImNhcmRMaXN0IiwiZGF0YSIsInBvcHVwRWRpdCIsImlucHV0cyIsInJlc3BvbnNlIiwicG9wdXBBZGQiLCJwb3B1cEVkaXRBdmF0YXIiLCJyZXZlcnNlIiwiY29uZmlnIiwidmFsaWRhdGVkRm9ybXMiLCJwdXNoIiwicmVmcmVzaEVkaXRJbnB1dHMiXSwic291cmNlUm9vdCI6IiJ9